<!DOCTYPE html>
    <html>
    <head>
    
    
    <link rel="manifest" href="manifest.json">
    <link rel="shortcut icon" type="image/png" href="images/brnsyllabus.png">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="application-name" content="ŞÖdevler">
    <meta name="apple-mobile-web-app-title" content="ŞÖdevler">
    <meta name="theme-color" content="#24f764">
    <meta name="msapplication-navbutton-color" content="#24f764">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="msapplication-starturl" content="/odevler">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="viewport" content="width=device-width", initial-scale=1>
    <title>Ödevler</title>
    <link rel="stylesheet" href="ödevler.css">
    <script src="https://kit.fontawesome.com/e12c74f269.js" crossorigin="anonymous"></script>
    <link rel="icon" href="icon.png">
    <link rel="apple-touch-icon" href="icon.png">
    <style type="text/css">
    
    .gizli{
        display: none !important;
    }
    
    
    .content{
        background-color: rgba(0,0,0,0.3);
        padding: 20px;
        border-radius: 15px;
        position: fixed;
        top:50%;
        left: 50%;
        transform: translate(-50%,-50%);
        width: 100%;
        height: 100%;
        background-repeat: no-repeat;
        background-size: 100% 100%;
    }
    
    
    button{
        font-size: 30px;
        border-radius: 10px;
    }
    
    body{
    
        text-align: center;
        
        }
    
    #notes{
        border:solid 3px rgba(0,0,0,.3);
        padding: 10px;
        background-color: gray;
        border-radius: 10px;
        font-family: Arial , serif;
        font-size: 36px;
        display: flex;
        flex-direction: column;
        justify-content: center;
    }
    
        .note{
    background-color: white;
    text-align: center;
    border-top: solid 1px gray;
    border-bottom: solid 1px gray;
    border-radius: 10px;
    width: 100%;
    margin: 0px;
    padding: 0px;
        }
    
        textarea{
            font-size:36px;
            background-color: lightgray;
        }
    </style>
    </head>
    <body>
        <div class="sidebar">
            <a href="index.html"><i class="fas fa-home"></i> Ana Sayfa</a>
        </div>
    <script type="text/javascript">
    
        if('serviceWorker' in navigator) {
      navigator.serviceWorker
               .register('/notdefteri/sw.js')
               .then(function() { console.log("Service Worker Kaydettirildi!!!"); });
    
    }
    
    </script>
    <div class="content">
        <h1 style="color: white;">Ödevler</h1>
        <button onclick="add()">+</button>
    
    <div id="notes">
        
    </div>
    
    <div id="edit" class="gizli">
    <div style="display: flex;justify-content: space-between;margin: 10px;">
    <button style="width: 100%;" onclick="closenote()">Kapat</button>
    <button style="width: 100%;" onclick="save()">Kaydet</button>
    <button style="width: 100%;" onclick="deletenote()">Sil</button>
    </div>
    <textarea id="txtbox" rows="10" style="width: 90%"></textarea></br>
    </div>
    
    
    </div>
    </div>
    <script type="text/javascript">
        if (localStorage.NDPass == undefined) {} else {
            var pass = prompt("Şifre")
            if(pass == localStorage.NDPass){
    
            }else{
                location.reload();
            }
        }
    
        var currentNote;
        var notesarray = JSON.parse(localStorage.getItem('NDNotes'))
        const notesdiv = document.getElementById('notes');
    
    
    if(notesarray == null){
        notesarray = [];
    }
    
    
    if(notesarray.length == 0){
        notesdiv.innerHTML = "Ödev Bulunamadı"
    }
    
    
        for (var i = notesarray.length - 1; i >= 0; i--) {
        
        
    
            notesdiv.innerHTML = notesdiv.innerHTML + "<a class='note' onclick='opennote("+ i + ")'>" + notesarray[i].title + "</a></br>"
        
    
        }
    
    
    
    function openSettings() {
        document.getElementById("settings").classList.remove("gizli")
        document.getElementById("notes").classList.add("gizli")
    }
    
    function closeSettings() {
        document.getElementById("settings").classList.add("gizli")
        document.getElementById("notes").classList.remove("gizli")
    }
    
    
    function closenote(argument) {
        document.getElementById("edit").classList.add("gizli")
        document.getElementById("notes").classList.remove("gizli")
        
    }
    
    function opennote(argument) {
        document.getElementById("edit").classList.remove("gizli")
        document.getElementById("notes").classList.add("gizli")
        document.getElementById('txtbox').value = notesarray[argument].content;
        currentNote = argument;
    }
    
    function deletenote(){
        if(confirm("Silmek İstediğinize Emin Misiniz ?")){
        notesarray.splice(currentNote, 1);
        localStorage.NDNotes = JSON.stringify(notesarray);
        closenote();
        refresh()
    }
    }
    
    function save(argument) {
        notesarray[currentNote].content = document.getElementById('txtbox').value;
        localStorage.NDNotes = JSON.stringify(notesarray);
        alert("Kaydedildi")
    }
    function add(argument) {
        var title = prompt("Ödev Başlığı")
        if(title != null){
        notesarray.push({title:title,content:""})
        localStorage.NDNotes = JSON.stringify(notesarray);
        refresh();}
    }
    
    function refresh(argument) {
    
    
        notesdiv.innerHTML = ""
    
    if(notesarray.length == 0){
        notesdiv.innerHTML = "Ödev Bulunamadı"
    }
    
        for (var i = notesarray.length - 1; i >= 0; i--) {
            
            notesdiv.innerHTML = notesdiv.innerHTML + "<a class='note' onclick='opennote("+ i + ")'>" + notesarray[i].title + "</a></br>"
        }
    }
    </script>
            <div class="footer">
                <p>Created by Baran Toprak Senkul</p>
            </div>
    </body>
</html>